<div [ngClass]="selectedGroup === row ? 'selected' : ''">
  <td (click)="onExpandToggle()" class="expand">
    <i
      [ngClass]="expanded ? 'si si-chevron_down' : 'si si-chevron_right'"
      [ngStyle]="calcIndentation(depth)"
    ></i>
  </td>

  <td
    *ngFor="let column of columns"
    title="{{ row[column] }}"
    [class]="column"
    (click)="onRowClick(row)"
  >
    {{ row[column] }}
  </td>
</div>

<ng-container *ngIf="expanded">
  <div *ngFor="let mapping of row.groupMappings" class="expanded-row" (click)="onRowClick(row)">
    <ng-container
      *ngIf="validationService.isGroup(mapping.item) && mapping.item?.groupMappings; else notGroup"
    >
      <sm-groups-table-row
        [columns]="columns"
        [depth]="depth"
        [row]="$any(mapping.item)"
        [selectedGroup]="selectedGroup"
      ></sm-groups-table-row>
    </ng-container>

    <ng-template #notGroup>
      <span class="st-typography-body mapping-name" [ngStyle]="calcIndentation(depth)">
        {{ getItemNameOrIdentifierFunc(mapping.item, undefined, false) }}
      </span>
    </ng-template>
  </div>
</ng-container>
